#
# Check for:
#
# - OpenStackControlPlane
# - OpenStackVMSet
# - VirtualMachines
# - OpenStackNet (IP reservations)
# - OpenStackIPSet (IP reservations)
#

apiVersion: osp-director.openstack.org/v1beta1
kind: OpenStackControlPlane
metadata:
  name: overcloud
  namespace: openstack
spec:
  controller:
    controllerCount: 3
---
apiVersion: osp-director.openstack.org/v1beta1
kind: OpenStackVMSet
metadata:
  name: controller
  namespace: openstack
spec:
  vmCount: 3
status:
  baseImageDVReady: true
  vmHosts:
    controller-0:
      hostname: controller-0
      ipaddresses:
        ctlplane: 192.168.25.102/24
    controller-1:
      hostname: controller-1
      ipaddresses:
        ctlplane: 192.168.25.103/24
    controller-2:
      hostname: controller-2
      ipaddresses:
        ctlplane: 192.168.25.104/24
---
apiVersion: kubevirt.io/v1alpha3
kind: VirtualMachine
metadata:
  name: controller-0
  namespace: openstack
status:
  conditions:
  - status: "True"
    type: Ready
  created: true
  ready: true
---
apiVersion: kubevirt.io/v1alpha3
kind: VirtualMachine
metadata:
  name: controller-1
  namespace: openstack
status:
  conditions:
  - status: "True"
    type: Ready
  created: true
  ready: true
---
apiVersion: kubevirt.io/v1alpha3
kind: VirtualMachine
metadata:
  name: controller-2
  namespace: openstack
status:
  conditions:
  - status: "True"
    type: Ready
  created: true
  ready: true
---
apiVersion: osp-director.openstack.org/v1beta1
kind: OpenStackNet
metadata:
  name: ctlplane
  namespace: openstack
status:
  reservations:
  - addToPredictableIPs: false
    hostname: controlplane-0
    idKey: controlplane-0
    ip: 192.168.25.100
    role: ControlPlane
    vip: true
  - addToPredictableIPs: false
    hostname: openstackclient-0
    idKey: openstackclient-0
    ip: 192.168.25.101
    role: OpenstackClient
    vip: false
  - addToPredictableIPs: true
    hostname: controller-0
    idKey: controller-0
    ip: 192.168.25.102
    role: controller
    vip: false
  - addToPredictableIPs: true
    hostname: controller-1
    idKey: controller-1
    ip: 192.168.25.103
    role: controller
    vip: false
  - addToPredictableIPs: true
    hostname: controller-2
    idKey: controller-2
    ip: 192.168.25.104
    role: controller
    vip: false
---
apiVersion: osp-director.openstack.org/v1beta1
kind: OpenStackIPSet
metadata:
  labels:
    addToPredictableIPsLabel: "true"
  name: controller
  namespace: openstack
spec:
  addToPredictableIPs: true
  hostCount: 3
  networks:
  - ctlplane
  role: controller
  vip: false
status:
  hosts:
    controller-0:
      ipaddresses:
        ctlplane: 192.168.25.102/24
    controller-1:
      ipaddresses:
        ctlplane: 192.168.25.103/24
    controller-2:
      ipaddresses:
        ctlplane: 192.168.25.104/24